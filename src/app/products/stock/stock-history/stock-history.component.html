<h2 mat-dialog-title>Stock History - {{parentData.data?.variant_name}}
  <span fxFlex></span>
  <span class="close-btn" align="end" (click)="dialogRef.close()">
    <mat-icon>close</mat-icon>
  </span>
</h2>
<mat-dialog-content class="mat-typography history-dialog-content">
  <div fxLayout="row">
    <div fxFlex="25%">
      <mat-form-field fxFlex="100">
        <mat-label>Select warehouse</mat-label>
        <mat-select placeholder="Select warehouse" (selectionChange)="getStockHistory(selectedStore)"
          [(ngModel)]="selectedStore" [disableOptionCentering]="true">
          <mat-option *ngFor="let store of parentData.header" [value]="store.storage_id">
            {{store.storage_name}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </div>
  <div class="loader-block" *ngIf="dataSource.length==0 && inProgress">
    <content-loader>
      <svg:rect x="10" y="0" rx="2" ry="2" width="250" height="3" />
      <svg:rect x="30" y="5" rx="2" ry="2" width="220" height="3" />
      <svg:rect x="30" y="10" rx="2" ry="2" width="170" height="3" />
      <svg:rect x="10" y="15" rx="2" ry="2" width="250" height="3" />
      <svg:rect x="30" y="20" rx="2" ry="2" width="200" height="3" />
      <svg:rect x="30" y="25" rx="2" ry="2" width="80" height="3" />
    </content-loader>
  </div>
  <div class="table-container fancyscroll" *ngIf="dataSource.length>0">
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
      <!-- Position Column -->
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef class="mat-header-name variant-name-column"> Transaction ID</th>
        <td mat-cell *matCellDef="let element" class="variant-name-column"> {{element.id}} </td>
      </ng-container>

      <!-- Name Column -->
      <ng-container matColumnDef="qty">
        <th mat-header-cell *matHeaderCellDef class="mat-header-name"> Quantity </th>
        <td mat-cell *matCellDef="let element"> {{element.qty}} </td>
      </ng-container>

      <ng-container matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef class="mat-header-name"> Action </th>
          <td mat-cell *matCellDef="let element"> {{element.action | titlecase}} </td>
        </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="source_name">
        <th mat-header-cell *matHeaderCellDef class="mat-header-name"> Source </th>
        <td mat-cell *matCellDef="let element"> {{element.source_name}} </td>
      </ng-container>

      <!-- Batch Column -->
      <ng-container matColumnDef="batch_no">
        <th mat-header-cell *matHeaderCellDef class="mat-header-name"> Batch # </th>
        <td mat-cell *matCellDef="let element"> {{element.batch_no? element.batch_no : "--"}} </td>
      </ng-container>

      <!-- Purchase price Column -->
      <ng-container matColumnDef="stock_price">
        <th mat-header-cell *matHeaderCellDef class="mat-header-name"> Purchase Price </th>
        <td mat-cell *matCellDef="let element"> {{element.stock_price|currency}} </td>
      </ng-container>

      <!-- Symbol Column -->
      <!-- <ng-container matColumnDef="destination_name">
        <th mat-header-cell *matHeaderCellDef class="mat-header-name"> Destination </th>
        <td mat-cell *matCellDef="let element"> {{element.destination_name}} </td>
      </ng-container> -->

      <ng-container matColumnDef="created_at">
        <th mat-header-cell *matHeaderCellDef class="mat-header-name"> Date Time </th>
        <td mat-cell *matCellDef="let element"> {{(element.created_at=='0000-00-00 00:00:00')?'': utils.convertLocalDateToUTCDate(element.created_at,false) | date: 'dd/MM/yyyy h:mm'}} </td>
      </ng-container>

      <ng-container matColumnDef="user_name">
        <th mat-header-cell *matHeaderCellDef class="mat-header-name"> Person </th>
        <td mat-cell *matCellDef="let element"> {{element.user_name}} </td>
      </ng-container>

      <ng-container matColumnDef="source_page">
        <th mat-header-cell *matHeaderCellDef class="mat-header-name"> Added From </th>
        <td mat-cell *matCellDef="let element"> 
          {{element.source_page == 'add_product'? 'Product Creation' : element.source_page == 'add_stock'? 'Stock ' : element.source_page == 'stock_transfer'? 'Stock Transfer' : element.source_page == 'add_po'? 'Purchase Order' : element.source_page == 'add_reconcile'? 'Reconcile' : '--' }} 
        </td>
      </ng-container>


      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>
  <div class="data-not-found" *ngIf="dataSource.length==0 && !inProgress">
    <p>No data found</p>
  </div>
</mat-dialog-content>