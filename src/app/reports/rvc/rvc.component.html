<mat-card class="header-main-content">
    <div fxLayout="row">
        <div fxFlex="25%" fxFlex.md="35%" fxFlex.sm="40%" class="breadcrumb-content">
        </div>
        <div fxFlex="50%" fxFlex.md="30%" fxFlex.sm="20%" class="breadcrumb-header-content center">
            Closeout Report
        </div>
        <div fxFlex="25%" fxFlex.md="35%" fxFlex.sm="40%" class="breadcrumb-btn-content end">
            <button mat-button matSuffix mat-stroked-button class="add-new-btn" [matMenuTriggerFor]="menu"
                type="button">
                <mat-icon class="report-header-button">get_app</mat-icon>
                <span>
                    <a class="add-new-label">EXPORT</a>
                </span>
            </button>
            <mat-menu #menu="matMenu">
                <button mat-menu-item [disabled]="rows.length == 0" (click)="getExportPDF()">PDF</button>
                <button mat-menu-item [disabled]="rows.length == 0" (click)="getExportCSV('csv')">CSV</button>
                <button mat-menu-item [disabled]="rows.length == 0" (click)="getExportCSV('xls')">EXCEL</button>
            </mat-menu>
            <button mat-button matSuffix mat-stroked-button class="add-new-btn" (click)="reset_form()">
                <mat-icon class="report-header-button">refresh</mat-icon>
                <span>
                    <a class="add-new-label">RESET</a>
                </span>
            </button>
        </div>
    </div>
</mat-card>

<mat-progress-bar mode="indeterminate" *ngIf="inProgress"></mat-progress-bar>
<div class="top-20">
    <div fxFlex="96%" fxFlexOffset="2%">
        <mat-card class="box-shadow report-filter-bar">
            <div _ngcontent-c41="" class="button-row">
                <form [formGroup]="rvc">
                    <div class="" fxLayout="row" fxLayoutGap="1%" fxLayoutAlign="left">
                        <div fxFlex="50%">
                            <mat-form-field fxFlex="100%">
                                <mat-select [formControl]="rvc.controls['store_id']" placeholder="Store"
                                    [disableOptionCentering]="true">
                                    <mat-option *ngFor="let wh of storeList" [value]="wh.store_id">{{ wh.name }}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div fxFlex="50%">
                            <mat-form-field fxFlex="100%" class="range-date-input">
                                <input type="text" autocomplete="off" readonly="true" matInput [locale]="localconfi"
                                    [alwaysShowCalendars]="true" ngxDaterangepickerMd [(ngModel)]="selected" [isInvalidDate]="isInvalidDate" startKey="start" endKey="end"
                                    [ranges]="ranges" [formControl]="rvc.controls['selected']" [minDate]="minDate"
                                    [maxDate]="maxDate" [autoApply]="true" 
                                    placeholder="Select Dates" [opens]="'left'">
                            </mat-form-field>
                        </div>
                        <!-- <div fxFlex="50%">
                            <mat-form-field fxFlex="100%" class="range-date-input">
                                <input type="text" autocomplete="off" readonly="true" matInput [locale]="localconfi"
                                    [alwaysShowCalendars]="true" ngxDaterangepickerMd
[(ngModel)]="selected"
[isInvalidDate]="isInvalidDate" [singleDatePicker]="true"
                                    startKey="start" endKey="end" [formControl]="rvc.controls['selected']"
                                    [autoApply]="true" [minDate]="minDate" [maxDate]="maxDate"
                                    placeholder="Select Dates">
                            </mat-form-field>
                        </div> -->
                    </div>
                </form>
            </div>
        </mat-card>
        <div class="section-content">
            <h2 class="padding-closeout" *ngIf="rows?.general_data?.length > 0">Daily Sales Summary</h2>
            <mat-card class="box-shadow report-listing" *ngIf="rows?.general_data?.length > 0">
                <ngx-datatable #myDatatable class="material" [ngStyle]="{'height':'auto'}" [headerHeight]="50"
                    [limit]="8" [columnMode]="'force'" [footerHeight]="50" [rowHeight]="48" [scrollbarV]="true"
                    [rows]="rows.general_data">
                    <ngx-datatable-column [resizeable]="false" prop="type" name="Type">
                        <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value"
                            let-row="row">
                            <span title="{{value}}"> {{value}}</span>
                        </ng-template>
                    </ngx-datatable-column>

                    <ngx-datatable-column [resizeable]="false" prop="count" name="Count">
                        <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value"
                            let-row="row">
                            <span title="{{value}}"> {{value}}</span>
                        </ng-template>
                    </ngx-datatable-column>

                    <ngx-datatable-column [resizeable]="false" prop="amount" name="Amount">
                        <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value"
                            let-row="row">
                            <!-- <span title="{{value}}"> {{value | currency:'':'symbol':'2.3-3'}}</span> -->
                            <span title="{{value}}"> {{value | currency}}</span>
                        </ng-template>
                    </ngx-datatable-column>

                    <ngx-datatable-footer>
                        <ng-template ngx-datatable-footer-template let-rowCount="rowCount">
                            <div class="total-rows">
                                Total : {{rowCount}}
                            </div>
                        </ng-template>
                    </ngx-datatable-footer>
                </ngx-datatable>
            </mat-card>
            <div fxLayout="column" *ngIf="rows?.general_data?.length==0 && !inProgress" class="report-error-msg">
                <div class="center">
                    <div>
                        <img src="../../assets/images/sad.svg" class="sad" alt="No Data Found">
                    </div>
                    <div>
                        <span class="Sorry-no-results-fo">Sorry, no results found</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="section-content" *ngFor="let till of rows?.till_data">
            <h2 class="padding-closeout">{{till.till_name}}</h2>
            <mat-card class="box-shadow report-listing" *ngIf="till?.data?.length > 0">
                <ngx-datatable #myDatatable class="material" [ngStyle]="{'height':'346px'}" [headerHeight]="50"
                    [limit]="5" [columnMode]="'force'" [footerHeight]="50" [rowHeight]="48" [scrollbarV]="true"
                    [rows]="till?.data">
                    <ngx-datatable-column [resizeable]="false" prop="type" name="Type">
                        <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value"
                            let-row="row">
                            <span title="{{value}}"> {{value}}</span>
                        </ng-template>
                    </ngx-datatable-column>

                    <ngx-datatable-column [resizeable]="false" prop="count" name="Count">
                        <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value"
                            let-row="row">
                            <span title="{{value}}"> {{value}}</span>
                        </ng-template>
                    </ngx-datatable-column>

                    <ngx-datatable-column [resizeable]="false" prop="amount" name="Amount">
                        <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value"
                            let-row="row">
                            <!-- <span title="{{value}}"> {{value | currency:'':'symbol':'2.3-3'}}</span> -->
                            <span title="{{value}}"> {{value | currency}}</span>
                        </ng-template>
                    </ngx-datatable-column>

                    <ngx-datatable-footer>
                        <ng-template ngx-datatable-footer-template let-rowCount="rowCount">
                            <div class="total-rows">
                                Total : {{rowCount}}
                            </div>
                        </ng-template>
                    </ngx-datatable-footer>
                </ngx-datatable>
            </mat-card>
            <div fxLayout="column" *ngIf="rows?.general_data?.length==0 && !inProgress" class="report-error-msg">
                <div class="center">
                    <div>
                        <img src="../../assets/images/sad.svg" class="sad" alt="No Data Found">
                    </div>
                    <div>
                        <span class="Sorry-no-results-fo">Sorry, no results found</span>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>