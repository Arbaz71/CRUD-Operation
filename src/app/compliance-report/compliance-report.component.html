<mat-card class="header-main-content">
  <div fxLayout="row">
    <div fxFlex="25%" class="breadcrumb-content">
    </div>
    <div fxFlex="50%" class="breadcrumb-header-content">
        Monthly Report
    </div>
  </div>
</mat-card>


<mat-progress-bar mode="indeterminate" *ngIf="inProgress"></mat-progress-bar>
<div class="top-20 report-inner-height">
  <div fxFlex="96%" fxFlexOffset="2%">
    <mat-card class="box-shadow report-filter-bar">
      <div _ngcontent-c41="" class="button-row">
        <form>
          <div class="" fxLayout="row" fxLayoutGap="1%" fxLayoutAlign="left">
            <div fxFlex="50%">
              <mat-form-field fxFlex="100%">
                <input matInput class="Search" (keyup)="applyFilter($event.target.value)"
                  placeholder="Search store / province name...">
              </mat-form-field>
            </div>

            <div fxFlex="50%">
              <mat-form-field>
                <input matInput [matDatepicker]="dp" (yearSelected)="chosenYearHandler($event)"
                (monthSelected)="chosenMonthHandler($event, dp)" [min]="minDate" [max]="maxDate" readonly  placeholder="Month and Year" [formControl]="date">
                <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>
                <mat-datepicker #dp  startView="multi-year" (yearSelected)="chosenYearHandler($event)"
                  (monthSelected)="chosenMonthHandler($event, dp)" panelClass="example-month-picker">
                </mat-datepicker>
              </mat-form-field>
            </div>

          </div>
        </form>
      </div>
    </mat-card>

    <mat-card class="box-shadow report-listing" *ngIf="rows.length > 0">
      <ngx-datatable #myDatatable class="material" [ngStyle]="{'height':dynamicHeight}" [headerHeight]="50" [limit]="10"
        [columnMode]="'force'" [footerHeight]="0" [rowHeight]="48" [scrollbarV]="true" [rows]="rows">

        <ngx-datatable-column [resizeable]="false" prop="city.location_name" name="Province">
          <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
            <span title="{{value}}"> {{value}}</span>
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column [resizeable]="false" prop="name" name="Store Name">
          <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
            <span title="{{value}}"> {{value}}</span>
          </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column name="Export" [sortable]="false" [resizeable]="false" [minWidth]="100" [maxWidth]="100">
          <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
            <button mat-icon-button (click)="exportCTLS(row['store_id'],row['name'])">
              <mat-icon>cloud_download</mat-icon>
            </button>
          </ng-template>
        </ngx-datatable-column>
      </ngx-datatable>
    </mat-card>
    <div fxLayout="column" *ngIf="rows.length==0 && !inProgress" class="report-error-msg">
      <div class="center">
        <div>
          <img src="../../assets/images/sad.svg" class="sad" alt="No Data Found">
        </div>
        <div>
          <span class="Sorry-no-results-fo">Sorry, no results found</span>
        </div>
      </div>
    </div>
  </div>
</div>